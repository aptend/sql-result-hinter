#SQL[@1,N30]Result[]
SET experimental_ivf_index = 1;

#SQL[@4,N30]Result[]
drop database if exists vecdb2;

#SQL[@5,N22]Result[]
create database vecdb2;

#SQL[@6,N10]Result[]
use vecdb2;

#SQL[@9,N23]Result[]
drop table if exists t1;

#SQL[@10,N59]Result[]
create table t1(a int primary key,b vecf32(3), c vecf64(5));

#SQL[@11,N50]Error[50]
insert into t1 values(1, "[1,2,3]" , "[1,2,3,4,5");
internal error: malformed vector input: [1,2,3,4,5

#SQL[@12,N50]Result[]
insert into t1 values(2, "[1,2,4]", "[1,2,4,4,5]");

#SQL[@13,N54]Result[]
insert into t1 values(3, "[1,2.4,4]", "[1,2.4,4,4,5]");

#SQL[@14,N50]Result[]
insert into t1 values(4, "[1,2,5]", "[1,2,5,4,5]");

#SQL[@15,N50]Result[]
insert into t1 values(5, "[1,3,5]", "[1,3,5,4,5]");

#SQL[@16,N60]Result[]
insert into t1 values(6, "[100,44,50]", "[100,44,50,60,70]");

#SQL[@17,N60]Result[]
insert into t1 values(7, "[120,50,70]", "[120,50,70,80,90]");

#SQL[@18,N62]Result[]
insert into t1 values(8, "[130,40,90]", "[130,40,90,100,110]");

#SQL[@21,N24]Result[]
drop table if exists tbl;

#SQL[@22,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@23,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@24,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@25,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@26,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@27,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@28,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@29,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@30,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@31,N83]Result[]
create index idx1 using IVFFLAT on tbl(embedding) lists = 2 op_type 'vector_l2_ops';

#SQL[@32,N19]Result[233, 119, 179]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  id  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  id
tbl  ¦  1  ¦  idx1  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@33,N43]Result[233, 179]
show index from tbl where Key_name = 'idx1';
table  ¦  non_unique  ¦  key_name  ¦  seq_in_index  ¦  column_name  ¦  collation  ¦  cardinality  ¦  sub_part  ¦  packed  ¦  null  ¦  index_type  ¦  comment  ¦  index_comment  ¦  index_params  ¦  visible  ¦  expression
tbl  ¦  1  ¦  idx1  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@34,N21]Result[23, 189]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int NOT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` USING ivfflat (`embedding`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@35,N110]Result[79, 105, 106, 104]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx1";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  metadata  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  centroids  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  entries  ¦  {"lists":"2","op_type":"vector_l2_ops"}

#SQL[@38,N50]Result[]
alter table tbl alter reindex idx1 ivfflat lists=3;

#SQL[@39,N19]Result[233, 119, 179]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  id  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  id
tbl  ¦  1  ¦  idx1  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"3","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@40,N21]Result[23, 189]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int NOT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` USING ivfflat (`embedding`) lists = 3  op_type 'vector_l2_ops' 
)

#SQL[@41,N110]Result[79, 105, 106, 104]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx1";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  metadata  ¦  {"lists":"3","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  centroids  ¦  {"lists":"3","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  entries  ¦  {"lists":"3","op_type":"vector_l2_ops"}

#SQL[@44,N31]Result[]
alter table tbl add c vecf32(3);

#SQL[@45,N19]Result[233, 179, 119]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  1  ¦  idx1  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"3","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  id  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  id

#SQL[@46,N21]Result[23, 219]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int NOT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  `c` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` USING ivfflat (`embedding`) lists = 3  op_type 'vector_l2_ops' 
)

#SQL[@47,N110]Result[79, 105, 106, 104]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx1";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  metadata  ¦  {"lists":"3","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  centroids  ¦  {"lists":"3","op_type":"vector_l2_ops"}
idx1  ¦  MULTIPLE  ¦  embedding  ¦  ivfflat  ¦  entries  ¦  {"lists":"3","op_type":"vector_l2_ops"}

#SQL[@50,N24]Result[]
drop table if exists tbl;

#SQL[@51,N60]Result[]
create table tbl(a int primary key,b vecf32(3), c vecf64(5));

#SQL[@52,N75]Result[]
create index idx2 using IVFFLAT on tbl(b) lists = 2 op_type 'vector_l2_ops';

#SQL[@53,N19]Result[233, 117, 163]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a
tbl  ¦  1  ¦  idx2  ¦  1  ¦  b  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  b

#SQL[@54,N21]Result[23, 201]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  `c` vecf64(5) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx2` USING ivfflat (`b`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@55,N110]Result[79, 97, 98, 96]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx2";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx2  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  metadata  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx2  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  centroids  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx2  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  entries  ¦  {"lists":"2","op_type":"vector_l2_ops"}

#SQL[@58,N24]Result[]
drop table if exists tbl;

#SQL[@59,N60]Result[]
create table tbl(a int primary key,b vecf32(3), c vecf32(3));

#SQL[@60,N46]Result[]
insert into tbl values(1, "[1,2,3]","[1,2,3]");

#SQL[@61,N46]Result[]
insert into tbl values(2, "[1,2,4]","[1,2,4]");

#SQL[@62,N50]Result[]
insert into tbl values(3, "[1,2.4,4]","[1,2.4,4]");

#SQL[@63,N46]Result[]
insert into tbl values(4, "[1,2,5]","[1,2,5]");

#SQL[@64,N75]Error[56]
create index idx3 using IVFFLAT on tbl(a) lists = 2 op_type 'vector_l2_ops';
not supported: IVFFLAT only supports VECFXX column types

#SQL[@65,N77]Error[59]
create index idx4 using IVFFLAT on tbl(b,c) lists = 2 op_type 'vector_l2_ops';
not supported: don't support multi column  IVF vector index

#SQL[@66,N52]Error[198]
create index idx5 using IVFFLAT on tbl(b) lists = -1;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 51 near \" -1\";

#SQL[@67,N75]Result[]
create index idx6 using IVFFLAT on tbl(b) lists = 1 op_type 'vector_l1_ops';

#SQL[@70,N24]Result[]
drop table if exists tbl;

#SQL[@71,N60]Result[]
create table tbl(a int primary key,b vecf32(3), c vecf32(3));

#SQL[@72,N46]Result[]
insert into tbl values(1, "[1,2,3]","[1,2,3]");

#SQL[@73,N46]Result[]
insert into tbl values(2, "[1,2,4]","[1,2,4]");

#SQL[@74,N50]Result[]
insert into tbl values(3, "[1,2.4,4]","[1,2.4,4]");

#SQL[@75,N46]Result[]
insert into tbl values(4, "[1,2,5]","[1,2,5]");

#SQL[@76,N41]Result[]
create index idx7 using IVFFLAT on tbl(b);

#SQL[@79,N24]Result[]
drop table if exists tbl;

#SQL[@80,N48]Result[]
create table tbl(a int primary key, b vecf32(3));

#SQL[@81,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@82,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@83,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@84,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@85,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@86,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@87,N40]Result[]
insert into tbl values(7, "[100,44,50]");

#SQL[@88,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@89,N75]Result[]
create index idx8 using IVFFLAT on tbl(b) lists = 2 op_type 'vector_l2_ops';

#SQL[@90,N19]Result[233, 117, 163]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a
tbl  ¦  1  ¦  idx8  ¦  1  ¦  b  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  b

#SQL[@91,N21]Result[23, 171]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx8` USING ivfflat (`b`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@92,N110]Result[79, 97, 98, 96]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx8";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx8  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  metadata  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx8  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  centroids  ¦  {"lists":"2","op_type":"vector_l2_ops"}
idx8  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  entries  ¦  {"lists":"2","op_type":"vector_l2_ops"}

#SQL[@95,N24]Result[]
drop table if exists tbl;

#SQL[@96,N78]Result[]
create table tbl(a int primary key, b vecf32(3), index idx9 using ivfflat (b));

#SQL[@99,N24]Result[]
drop table if exists tbl;

#SQL[@100,N79]Result[]
create table tbl(a int primary key, b vecf32(3), index idx10 using ivfflat (b));

#SQL[@101,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@102,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@103,N19]Result[233, 164, 117]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  1  ¦  idx10  ¦  1  ¦  b  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"1","op_type":"vector_l2_ops"}  ¦  YES  ¦  b
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a

#SQL[@104,N21]Result[23, 172]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx10` USING ivfflat (`b`) lists = 1  op_type 'vector_l2_ops' 
)

#SQL[@105,N111]Result[79, 98, 99, 97]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx10";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx10  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  metadata  ¦  {"lists":"1","op_type":"vector_l2_ops"}
idx10  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  centroids  ¦  {"lists":"1","op_type":"vector_l2_ops"}
idx10  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  entries  ¦  {"lists":"1","op_type":"vector_l2_ops"}

#SQL[@106,N29]Result[]
alter table tbl drop column b;

#SQL[@107,N19]Result[233, 117]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a

#SQL[@108,N21]Result[23, 71]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  PRIMARY KEY (`a`)
)

#SQL[@109,N111]Result[]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx10";

#SQL[@112,N24]Result[]
drop table if exists tbl;

#SQL[@113,N79]Result[]
create table tbl(a int primary key, b vecf32(3), index idx11 using ivfflat (b));

#SQL[@114,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@115,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@116,N19]Result[233, 164, 117]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  1  ¦  idx11  ¦  1  ¦  b  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"1","op_type":"vector_l2_ops"}  ¦  YES  ¦  b
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a

#SQL[@117,N21]Result[23, 172]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx11` USING ivfflat (`b`) lists = 1  op_type 'vector_l2_ops' 
)

#SQL[@118,N111]Result[79, 98, 99, 97]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx11";
name  ¦  type  ¦  column_name  ¦  algo  ¦  algo_table_type  ¦  algo_params
idx11  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  metadata  ¦  {"lists":"1","op_type":"vector_l2_ops"}
idx11  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  centroids  ¦  {"lists":"1","op_type":"vector_l2_ops"}
idx11  ¦  MULTIPLE  ¦  b  ¦  ivfflat  ¦  entries  ¦  {"lists":"1","op_type":"vector_l2_ops"}

#SQL[@119,N32]Result[]
alter table tbl drop index idx11;

#SQL[@120,N19]Result[233, 117]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  a  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  a

#SQL[@121,N21]Result[23, 101]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`a`)
)

#SQL[@122,N111]Result[]
select name, type, column_name, algo, algo_table_type,algo_params from mo_catalog.mo_indexes where name="idx11";

#SQL[@125,N24]Result[]
drop table if exists tbl;

#SQL[@126,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@127,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@128,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@129,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@130,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@131,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@132,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@133,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@134,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@135,N82]Result[]
create index idx12 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@136,N19]Result[233, 119, 180]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  id  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  id
tbl  ¦  1  ¦  idx12  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@137,N21]Result[23, 190]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int NOT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx12` USING ivfflat (`embedding`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@138,N37]Result[]
insert into tbl values(15, "[1,3,5]");

#SQL[@139,N41]Result[]
insert into tbl values(18, "[130,40,90]");

#SQL[@140,N51]Result[]
alter table tbl alter reindex idx12 ivfflat lists=2;

#SQL[@141,N37]Result[]
insert into tbl values(25, "[2,4,5]");

#SQL[@142,N41]Result[]
insert into tbl values(28, "[131,41,91]");

#SQL[@145,N24]Result[]
drop table if exists tbl;

#SQL[@146,N76]Result[]
create table tbl(id int, age int, embedding vecf32(3), primary key(id, age));

#SQL[@147,N40]Result[]
insert into tbl values(1, 10, "[1,2,3]");

#SQL[@148,N40]Result[]
insert into tbl values(2, 20, "[1,2,4]");

#SQL[@149,N42]Result[]
insert into tbl values(3, 30, "[1,2.4,4]");

#SQL[@150,N40]Result[]
insert into tbl values(4, 40, "[1,2,5]");

#SQL[@151,N40]Result[]
insert into tbl values(5, 50, "[1,3,5]");

#SQL[@152,N44]Result[]
insert into tbl values(6, 60, "[100,44,50]");

#SQL[@153,N44]Result[]
insert into tbl values(7, 70, "[120,50,70]");

#SQL[@154,N44]Result[]
insert into tbl values(8, 80, "[130,40,90]");

#SQL[@155,N82]Result[]
create index idx13 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@156,N19]Result[233, 119, 121, 180]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  0  ¦  PRIMARY  ¦  1  ¦  id  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  id
tbl  ¦  0  ¦  PRIMARY  ¦  2  ¦  age  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  age
tbl  ¦  1  ¦  idx13  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@157,N21]Result[23, 218]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int NOT NULL,
  `age` int NOT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  PRIMARY KEY (`id`,`age`),
  KEY `idx13` USING ivfflat (`embedding`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@158,N41]Result[]
insert into tbl values(15, 90, "[1,3,5]");

#SQL[@159,N46]Result[]
insert into tbl values(18, 100, "[130,40,90]");

#SQL[@160,N51]Result[]
alter table tbl alter reindex idx13 ivfflat lists=2;

#SQL[@161,N42]Result[]
insert into tbl values(25, 110, "[2,4,5]");

#SQL[@162,N46]Result[]
insert into tbl values(28, 120, "[131,41,91]");

#SQL[@166,N24]Result[]
drop table if exists tbl;

#SQL[@167,N45]Result[]
create table tbl(id int, embedding vecf32(3));

#SQL[@168,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@169,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@170,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@171,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@172,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@173,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@174,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@175,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@176,N82]Result[]
create index idx14 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@177,N19]Result[233, 180]
show index from tbl;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
tbl  ¦  1  ¦  idx14  ¦  1  ¦  embedding  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦  ivfflat  ¦    ¦    ¦  {"lists":"2","op_type":"vector_l2_ops"}  ¦  YES  ¦  embedding

#SQL[@178,N21]Result[23, 172]
show create table tbl;
Table  ¦  Create Table
tbl  ¦  CREATE TABLE `tbl` (
  `id` int DEFAULT NULL,
  `embedding` vecf32(3) DEFAULT NULL,
  KEY `idx14` USING ivfflat (`embedding`) lists = 2  op_type 'vector_l2_ops' 
)

#SQL[@179,N37]Result[]
insert into tbl values(15, "[1,3,5]");

#SQL[@180,N41]Result[]
insert into tbl values(18, "[130,40,90]");

#SQL[@181,N51]Result[]
alter table tbl alter reindex idx14 ivfflat lists=2;

#SQL[@182,N37]Result[]
insert into tbl values(25, "[2,4,5]");

#SQL[@183,N41]Result[]
insert into tbl values(28, "[131,41,91]");

#SQL[@188,N24]Result[]
drop table if exists tbl;

#SQL[@189,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@190,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@191,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@192,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@193,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@194,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@195,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@196,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@197,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@198,N82]Result[]
create index idx15 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@199,N40]Result[]
insert into tbl values(9, "[130,40,90]");

#SQL[@200,N26]Result[]
delete from tbl where id=9;

#SQL[@201,N45]Result[]
delete from tbl where embedding="[130,40,90]";

#SQL[@202,N51]Result[]
alter table tbl alter reindex idx15 ivfflat lists=2;

#SQL[@203,N41]Result[]
insert into tbl values(10, "[130,40,90]");

#SQL[@204,N26]Result[]
delete from tbl where id=6;

#SQL[@205,N41]Result[]
delete from tbl where embedding="[1,3,5]";

#SQL[@206,N27]Result[]
delete from tbl where id=10;

#SQL[@209,N24]Result[]
drop table if exists tbl;

#SQL[@210,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@211,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@212,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@213,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@214,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@215,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@216,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@217,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@218,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@219,N82]Result[]
create index idx16 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@220,N15]Result[]
delete from tbl;

#SQL[@223,N24]Result[]
drop table if exists tbl;

#SQL[@224,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@225,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@226,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@227,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@228,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@229,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@230,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@231,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@232,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@233,N82]Result[]
create index idx16 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@234,N18]Result[]
truncate table tbl;

#SQL[@238,N24]Result[]
drop table if exists tbl;

#SQL[@239,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@240,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@241,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@242,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@243,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@244,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@245,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@246,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@247,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@248,N82]Result[]
create index idx16 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@249,N45]Result[]
update tbl set embedding="[1,2,3]" where id=8;

#SQL[@250,N30]Result[]
update tbl set id=9 where id=8;

#SQL[@251,N51]Result[]
alter table tbl alter reindex idx16 ivfflat lists=2;

#SQL[@252,N45]Result[]
update tbl set embedding="[1,2,3]" where id=7;

#SQL[@253,N31]Result[]
update tbl set id=10 where id=7;

#SQL[@256,N24]Result[]
drop table if exists tbl;

#SQL[@257,N92]Result[]
create table tbl(id varchar(20), age varchar(20), embedding vecf32(3), primary key(id, age));

#SQL[@258,N44]Result[]
insert into tbl values("1", "10", "[1,2,3]");

#SQL[@259,N44]Result[]
insert into tbl values("2", "20", "[1,2,4]");

#SQL[@260,N46]Result[]
insert into tbl values("3", "30", "[1,2.4,4]");

#SQL[@261,N44]Result[]
insert into tbl values("4", "40", "[1,2,5]");

#SQL[@262,N44]Result[]
insert into tbl values("5", "50", "[1,3,5]");

#SQL[@263,N48]Result[]
insert into tbl values("6", "60", "[100,44,50]");

#SQL[@264,N48]Result[]
insert into tbl values("7", "70", "[120,50,70]");

#SQL[@265,N48]Result[]
insert into tbl values("8", "80", "[130,40,90]");

#SQL[@266,N82]Result[]
create index idx17 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@267,N47]Result[]
update tbl set embedding="[1,2,3]" where id="8";

#SQL[@268,N62]Result[]
update tbl set embedding="[1,2,3]" where id="7" and age = "70";

#SQL[@269,N35]Result[]
update tbl set id="70" where id="7";

#SQL[@270,N51]Result[]
alter table tbl alter reindex idx17 ivfflat lists=2;

#SQL[@271,N47]Result[]
update tbl set embedding="[1,2,3]" where id="6";

#SQL[@272,N35]Result[]
update tbl set id="60" where id="6";

#SQL[@275,N24]Result[]
drop table if exists tbl;

#SQL[@276,N45]Result[]
create table tbl(id int, embedding vecf32(3));

#SQL[@277,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@278,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@279,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@280,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@281,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@282,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@283,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@284,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@285,N82]Result[]
create index idx17 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@286,N47]Result[]
update tbl set embedding="[1,2,3]" where id="8";

#SQL[@287,N28]Result[]
delete from tbl where id="8";

#SQL[@290,N24]Result[]
drop table if exists tbl;

#SQL[@291,N126]Result[]
create table tbl(id int primary key, embedding vecf32(3), key idx18 using ivfflat (embedding) lists=2 op_type "vector_l2_ops");

#SQL[@292,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@293,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@294,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@295,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@296,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@297,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@298,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@299,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@302,N42]Result[]
alter table tbl add column id2 VARCHAR(20);

#SQL[@326,N23]Result[]
update tbl set id2 = id;

#SQL[@329,N25]Result[]
drop table if exists tbl1;

#SQL[@330,N53]Result[]
create table tbl1(id int primary key, data vecf32(3));

#SQL[@331,N37]Result[]
insert into tbl1 values(1, "[1,2,3]");

#SQL[@332,N37]Result[]
insert into tbl1 values(2, "[1,2,4]");

#SQL[@333,N39]Result[]
insert into tbl1 values(3, "[1,2.4,4]");

#SQL[@334,N37]Result[]
insert into tbl1 values(4, "[1,2,5]");

#SQL[@335,N37]Result[]
insert into tbl1 values(5, "[1,3,5]");

#SQL[@336,N41]Result[]
insert into tbl1 values(6, "[100,44,50]");

#SQL[@337,N41]Result[]
insert into tbl1 values(7, "[120,50,70]");

#SQL[@338,N41]Result[]
insert into tbl1 values(8, "[130,40,90]");

#SQL[@339,N78]Result[]
create index idx19 using ivfflat on tbl1(data) lists=2 op_type "vector_l2_ops";

#SQL[@340,N41]Result[]
insert into tbl1 values(9, "[130,40,90]");

#SQL[@342,N25]Result[]
drop table if exists tbl2;

#SQL[@343,N117]Result[]
create table tbl2(id int primary key, data vecf32(3), key idx20 using ivfflat (data) lists=2 op_type "vector_l2_ops");

#SQL[@344,N35]Result[]
insert into tbl2 select * from tbl1;

#SQL[@363,N25]Result[]
drop table if exists tbl1;

#SQL[@364,N53]Result[]
create table tbl1(id int primary key, data vecf32(3));

#SQL[@365,N78]Result[]
create index idx19 using ivfflat on tbl1(data) lists=2 op_type "vector_l2_ops";

#SQL[@366,N37]Result[]
insert into tbl1 values(1, "[1,2,3]");

#SQL[@367,N37]Result[]
insert into tbl1 values(2, "[1,2,4]");

#SQL[@368,N39]Result[]
insert into tbl1 values(3, "[1,2.4,4]");

#SQL[@369,N37]Result[]
insert into tbl1 values(4, "[1,2,5]");

#SQL[@370,N37]Result[]
insert into tbl1 values(5, "[1,3,5]");

#SQL[@371,N41]Result[]
insert into tbl1 values(6, "[100,44,50]");

#SQL[@372,N41]Result[]
insert into tbl1 values(7, "[120,50,70]");

#SQL[@373,N41]Result[]
insert into tbl1 values(8, "[130,40,90]");

#SQL[@392,N24]Result[]
drop table if exists tbl;

#SQL[@393,N52]Result[]
create table tbl(id int primary key, data vecf32(3));

#SQL[@394,N31]Result[]
insert into tbl values(1, NULL);

#SQL[@395,N31]Result[]
insert into tbl values(2, NULL);

#SQL[@396,N31]Result[]
insert into tbl values(3, NULL);

#SQL[@397,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@398,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@399,N77]Result[]
create index idx20 using ivfflat on tbl(data) lists=2 op_type "vector_l2_ops";

#SQL[@400,N31]Result[]
insert into tbl values(6, NULL);

#SQL[@401,N40]Result[]
insert into tbl values(7, "[130,40,90]");

#SQL[@418,N24]Result[]
drop table if exists tbl;

#SQL[@419,N52]Result[]
create table tbl(id int primary key, data vecf32(3));

#SQL[@420,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@421,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@422,N77]Result[]
create index idx21 using ivfflat on tbl(data) lists=3 op_type "vector_l2_ops";

#SQL[@432,N24]Result[]
drop table if exists tbl;

#SQL[@433,N52]Result[]
create table tbl(id int primary key, data vecf32(3));

#SQL[@434,N77]Result[]
create index idx22 using ivfflat on tbl(data) lists=3 op_type "vector_l2_ops";

#SQL[@435,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@436,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@445,N24]Result[]
drop table if exists tbl;

#SQL[@446,N45]Result[]
create table tbl(id int, embedding vecf32(3));

#SQL[@447,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@448,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@449,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@450,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@451,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@452,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@453,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@454,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@455,N82]Result[]
create index idx23 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@456,N51]Result[]
alter table tbl alter reindex idx23 ivfflat lists=2;

#SQL[@457,N18]Result[]
truncate table tbl;

#SQL[@467,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@468,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@469,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@470,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@471,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@472,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@473,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@474,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@477,N24]Result[]
drop table if exists tbl;

#SQL[@478,N45]Result[]
create table tbl(id int, embedding vecf32(3));

#SQL[@479,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@480,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@481,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@482,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@483,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@484,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@485,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@486,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@487,N82]Result[]
create index idx23 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@488,N51]Result[]
alter table tbl alter reindex idx23 ivfflat lists=2;

#SQL[@489,N15]Result[]
delete from tbl;

#SQL[@499,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@500,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@501,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@502,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@503,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@504,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@505,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@506,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@510,N24]Result[]
drop table if exists tbl;

#SQL[@511,N57]Result[]
create table tbl(id int primary key, embedding vecf32(3));

#SQL[@512,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@513,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@514,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@515,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@516,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@517,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@518,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@519,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@520,N82]Result[]
create index idx16 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@521,N82]Error[78]
create index idx17 using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";
not supported: Multiple IVFFLAT indexes are not allowed to use the same column

#SQL[@522,N40]Result[]
insert into tbl values(9, "[130,40,90]");

#SQL[@558,N24]Result[]
drop table if exists tbl;

#SQL[@559,N18]Result[]
SET @PROBE_LIMIT=1;

#SQL[@560,N57]Result[]
create table tbl(id int PRIMARY KEY, embedding vecf32(3));

#SQL[@561,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@562,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@563,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@564,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@565,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@566,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@567,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@568,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@569,N87]Result[17, 20, 20, 20]
SELECT id, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  embedding
7  ¦  [120, 50, 70]
8  ¦  [130, 40, 90]
6  ¦  [100, 44, 50]

#SQL[@570,N80]Result[]
create index idx using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@571,N87]Result[17, 20, 20, 20]
SELECT id, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  embedding
7  ¦  [120, 50, 70]
8  ¦  [130, 40, 90]
6  ¦  [100, 44, 50]

#SQL[@574,N24]Result[]
drop table if exists tbl;

#SQL[@575,N45]Result[]
create table tbl(id int, embedding vecf32(3));

#SQL[@576,N36]Result[]
insert into tbl values(1, "[1,2,3]");

#SQL[@577,N36]Result[]
insert into tbl values(2, "[1,2,4]");

#SQL[@578,N38]Result[]
insert into tbl values(3, "[1,2.4,4]");

#SQL[@579,N36]Result[]
insert into tbl values(4, "[1,2,5]");

#SQL[@580,N36]Result[]
insert into tbl values(5, "[1,3,5]");

#SQL[@581,N40]Result[]
insert into tbl values(6, "[100,44,50]");

#SQL[@582,N40]Result[]
insert into tbl values(7, "[120,50,70]");

#SQL[@583,N40]Result[]
insert into tbl values(8, "[130,40,90]");

#SQL[@584,N87]Result[17, 20, 20, 20]
SELECT id, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  embedding
7  ¦  [120, 50, 70]
8  ¦  [130, 40, 90]
6  ¦  [100, 44, 50]

#SQL[@585,N80]Result[]
create index idx using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@586,N87]Result[17, 20, 20, 20]
SELECT id, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  embedding
7  ¦  [120, 50, 70]
8  ¦  [130, 40, 90]
6  ¦  [100, 44, 50]

#SQL[@589,N24]Result[]
drop table if exists tbl;

#SQL[@590,N76]Result[]
create table tbl(id int, id2 int, embedding vecf32(3), primary key(id, id2));

#SQL[@591,N38]Result[]
insert into tbl values(1, 0,"[1,2,3]");

#SQL[@592,N39]Result[]
insert into tbl values(2, 0, "[1,2,4]");

#SQL[@593,N40]Result[]
insert into tbl values(3, 0,"[1,2.4,4]");

#SQL[@594,N39]Result[]
insert into tbl values(4, 0, "[1,2,5]");

#SQL[@595,N39]Result[]
insert into tbl values(5, 0, "[1,3,5]");

#SQL[@596,N43]Result[]
insert into tbl values(6, 0, "[100,44,50]");

#SQL[@597,N43]Result[]
insert into tbl values(7, 0, "[120,50,70]");

#SQL[@598,N43]Result[]
insert into tbl values(8, 0, "[130,40,90]");

#SQL[@599,N91]Result[26, 27, 27, 27]
SELECT id,id2, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  id2  ¦  embedding
7  ¦  0  ¦  [120, 50, 70]
8  ¦  0  ¦  [130, 40, 90]
6  ¦  0  ¦  [100, 44, 50]

#SQL[@600,N80]Result[]
create index idx using ivfflat on tbl(embedding) lists=2 op_type "vector_l2_ops";

#SQL[@601,N91]Result[26, 27, 27, 27]
SELECT id,id2, embedding FROM tbl ORDER BY l2_distance(embedding,'[120,51,70]') ASC LIMIT 3;
id  ¦  id2  ¦  embedding
7  ¦  0  ¦  [120, 50, 70]
8  ¦  0  ¦  [130, 40, 90]
6  ¦  0  ¦  [100, 44, 50]

#SQL[@602,N19]Result[]
SET @test_limit = 3;

#SQL[@603,N36]Result[2, 1, 1, 1]
SELECT id from tbl LIMIT @test_limit;
id
1
2
3

#SQL[@606,N72]Result[]
create table vector_index_05(a int primary key, b vecf32(3),c vecf32(4));

#SQL[@607,N86]Result[]
create index idx01 using ivfflat on vector_index_05(c) lists=4 op_type "vector_l2_ops";

#SQL[@608,N33]Result[23, 226]
show create table vector_index_05;
Table  ¦  Create Table
vector_index_05  ¦  CREATE TABLE `vector_index_05` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  `c` vecf32(4) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx01` USING ivfflat (`c`) lists = 4  op_type 'vector_l2_ops' 
)

#SQL[@609,N63]Result[]
alter table vector_index_05 alter reindex idx01 ivfflat lists=5;

#SQL[@610,N33]Result[23, 226]
show create table vector_index_05;
Table  ¦  Create Table
vector_index_05  ¦  CREATE TABLE `vector_index_05` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  `c` vecf32(4) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx01` USING ivfflat (`c`) lists = 5  op_type 'vector_l2_ops' 
)

#SQL[@613,N72]Result[]
create table vector_index_04(a int primary key, b vecf32(3),c vecf32(4));

#SQL[@614,N155]Result[]
insert into vector_index_04 values(1,"[56,23,6]","[0.25,0.14,0.88,0.0001]"),(2,"[77,45,3]","[1.25,5.25,8.699,4.25]"),(3,"[8,56,3]","[9.66,5.22,1.22,7.02]");

#SQL[@615,N86]Result[]
create index idx01 using ivfflat on vector_index_04(c) lists=5 op_type "vector_l2_ops";

#SQL[@616,N172]Result[]
insert into vector_index_04 values(4,"[156,213,61]","[10.25,0.14,0.88,10.0001]"),(5,"[177,425,30]","[11.25,51.25,80.699,44.25]"),(6,"[80,56,3]","[90.686,5.212,19.22,7.02]");

#SQL[@617,N33]Result[23, 226]
show create table vector_index_04;
Table  ¦  Create Table
vector_index_04  ¦  CREATE TABLE `vector_index_04` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  `c` vecf32(4) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx01` USING ivfflat (`c`) lists = 5  op_type 'vector_l2_ops' 
)

#SQL[@618,N63]Result[]
alter table vector_index_04 alter reindex idx01 ivfflat lists=8;

#SQL[@619,N33]Result[23, 226]
show create table vector_index_04;
Table  ¦  Create Table
vector_index_04  ¦  CREATE TABLE `vector_index_04` (
  `a` int NOT NULL,
  `b` vecf32(3) DEFAULT NULL,
  `c` vecf32(4) DEFAULT NULL,
  PRIMARY KEY (`a`),
  KEY `idx01` USING ivfflat (`c`) lists = 8  op_type 'vector_l2_ops' 
)

#SQL[@622,N79]Result[]
create table vector_index_08(a int primary key, b vecf32(128),c int,key c_k(c));

#SQL[@623,N86]Result[]
create index idx01 using ivfflat on vector_index_08(b) lists=3 op_type "vector_l2_ops";

#SQL[@624,N67]Result[]
alter table vector_index_08 add column d vecf32(3) not null after c;

#SQL[@627,N79]Result[]
create table vector_index_07(a int primary key, b vecf32(128),c int,key c_k(c));

#SQL[@628,N54]Result[]
create index idx01 using ivfflat on vector_index_07(b);

#SQL[@629,N62]Error[214]
create index idx02 using ivfflat on vector_index_07(b) lists=0;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. LISTS should be greater than 0 at line 1 column 62 near \"0\";

#SQL[@630,N57]Error[225]
alter table vector_index_07 reindex idx01 ivfflat lists=0;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near \" reindex idx01 ivfflat lists=0\";

#SQL[@631,N49]Error[217]
alter table vector_index_07 reindex idx01 ivfflat;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near \" reindex idx01 ivfflat\";

#SQL[@634,N79]Result[]
create table vector_index_09(a int primary key, b vecf32(128),c int,key c_k(c));

#SQL[@635,N63]Result[]
insert into vector_index_09 values(9774 ,NULL,3),(9775,NULL,10);

#SQL[@636,N56]Result[]
insert into vector_index_09(a,c) values(9777,4),(9778,9);

#SQL[@637,N86]Result[]
create index idx01 using ivfflat on vector_index_09(b) lists=3 op_type "vector_l2_ops";

#SQL[@638,N79]Result[15, 21, 22, 21, 21]
select * from vector_index_09 order by L2_DISTANCE(b,"[1, 0, 1, 6, 6, 17, 47]");
a  ¦  b  ¦  c
9774  ¦  null  ¦  3
9775  ¦  null  ¦  10
9777  ¦  null  ¦  4
9778  ¦  null  ¦  9

#SQL[@639,N1443]Result[]
insert into vector_index_09 values(97741 ,"[1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]",3),(97751,"[0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]",5),(9776,"[10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]",3);

#SQL[@640,N985]Result[]
insert into vector_index_09 values(97771, "[16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]",4),(97781,"[41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]",4);

#SQL[@641,N63]Result[]
alter table vector_index_09 alter reindex idx01 ivfflat lists=2;

#SQL[@644,N36]Result[]
drop table if exists vector_index_07;

#SQL[@645,N79]Result[]
create table vector_index_07(a int primary key, b vecf32(128),c int,key c_k(c));

#SQL[@646,N86]Result[]
create index idx01 using ivfflat on vector_index_07(b) lists=5 op_type "vector_l2_ops";

#SQL[@647,N1441]Result[]
insert into vector_index_07 values(9774 ,"[1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]",3),(9775,"[0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]",5),(9776,"[10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]",3);

#SQL[@648,N984]Result[]
insert into vector_index_07 values(9777, " [16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]",4),(9778,"[41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]",4);

#SQL[@649,N73]Error[43]
select * from vector_index_07 order by  L2_DISTANCE(b, "abc") ASC LIMIT 2;
internal error: malformed vector input: abc

#SQL[@652,N36]Result[]
drop table if exists vector_index_08;

#SQL[@653,N94]Result[]
create table vector_index_08(a int auto_increment primary key, b vecf32(128),c int,key c_k(c));

#SQL[@654,N1441]Result[]
insert into vector_index_08 values(9774 ,"[1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]",3),(9775,"[0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]",5),(9776,"[10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]",3);

#SQL[@655,N983]Result[]
insert into vector_index_08 values(9777, "[16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]",4),(9778,"[41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]",4);

#SQL[@656,N86]Result[]
create index idx01 using ivfflat on vector_index_08(b) lists=3 op_type "vector_l2_ops";

#SQL[@657,N31]Result[15, 472, 471, 479, 480, 479]
select * from  vector_index_08 ;
a  ¦  b  ¦  c
9774  ¦  [1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]  ¦  3
9775  ¦  [0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]  ¦  5
9776  ¦  [10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]  ¦  3
9777  ¦  [16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]  ¦  4
9778  ¦  [41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]  ¦  4

#SQL[@658,N507]Result[]
update vector_index_08 set b="[16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]" where a=9774;

#SQL[@659,N43]Result[15, 480]
select * from  vector_index_08 where a=9774;
a  ¦  b  ¦  c
9774  ¦  [16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]  ¦  3

#SQL[@660,N40]Result[]
delete from vector_index_08 where a=9777;

#SQL[@661,N43]Result[]
select * from  vector_index_08 where a=9777;

#SQL[@662,N30]Result[]
truncate table vector_index_08;

#SQL[@663,N30]Result[]
select * from  vector_index_08;

#SQL[@664,N1441]Result[]
insert into vector_index_08 values(9774 ,"[1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]",3),(9775,"[0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]",5),(9776,"[10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]",3);

#SQL[@665,N67]Result[]
alter table vector_index_08 add column d vecf32(3) not null after c;

#SQL[@666,N29]Result[22, 487, 486, 494]
select * from vector_index_08;
a  ¦  b  ¦  c  ¦  d
9774  ¦  [1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]  ¦  3  ¦  [0, 0, 0]
9775  ¦  [0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]  ¦  5  ¦  [0, 0, 0]
9776  ¦  [10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]  ¦  3  ¦  [0, 0, 0]

#SQL[@669,N36]Result[]
drop table if exists vector_index_08;

#SQL[@670,N66]Result[]
create table vector_index_08(a int primary key, b vecf32(3),c int);

#SQL[@671,N53]Result[]
insert into vector_index_08 values(1 ,"[1, 2, 3]",11);

#SQL[@672,N53]Result[]
insert into vector_index_08 values(2 ,"[1, 2, 3]",12);

#SQL[@673,N53]Result[]
insert into vector_index_08 values(3 ,"[1, 2, 3]",13);

#SQL[@674,N89]Result[]
create index idx01 using ivfflat on vector_index_08(b)  lists = 2 op_type 'vector_l2_ops';

#SQL[@675,N67]Result[]
alter table vector_index_08 add column d vecf32(3) not null after c;

#SQL[@676,N29]Result[22, 39, 39, 39]
select * from vector_index_08;
a  ¦  b  ¦  c  ¦  d
1  ¦  [1, 2, 3]  ¦  11  ¦  [0, 0, 0]
2  ¦  [1, 2, 3]  ¦  12  ¦  [0, 0, 0]
3  ¦  [1, 2, 3]  ¦  13  ¦  [0, 0, 0]

#SQL[@678,N36]Result[]
drop table if exists vector_index_08;

#SQL[@679,N81]Result[]
create table vector_index_08(a int auto_increment primary key, b vecf32(3),c int);

#SQL[@680,N53]Result[]
insert into vector_index_08 values(1 ,"[1, 2, 3]",11);

#SQL[@681,N53]Result[]
insert into vector_index_08 values(2 ,"[1, 2, 3]",12);

#SQL[@682,N53]Result[]
insert into vector_index_08 values(3 ,"[1, 2, 3]",13);

#SQL[@683,N89]Result[]
create index idx01 using ivfflat on vector_index_08(b)  lists = 2 op_type 'vector_l2_ops';

#SQL[@684,N67]Result[]
alter table vector_index_08 add column d vecf32(3) not null after c;

#SQL[@685,N29]Result[22, 39, 39, 39]
select * from vector_index_08;
a  ¦  b  ¦  c  ¦  d
1  ¦  [1, 2, 3]  ¦  11  ¦  [0, 0, 0]
2  ¦  [1, 2, 3]  ¦  12  ¦  [0, 0, 0]
3  ¦  [1, 2, 3]  ¦  13  ¦  [0, 0, 0]

#SQL[@688,N36]Result[]
drop table if exists vector_index_08;

#SQL[@689,N79]Result[]
create table vector_index_08(a int primary key, b vecf32(128),c int,key c_k(c));

#SQL[@690,N86]Result[]
create index idx01 using ivfflat on vector_index_08(b) lists=3 op_type "vector_l2_ops";

#SQL[@691,N1441]Result[]
insert into vector_index_08 values(9774 ,"[1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]",3),(9775,"[0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]",5),(9776,"[10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]",3);

#SQL[@692,N983]Result[]
insert into vector_index_08 values(9777, "[16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]",4),(9778,"[41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]",4);

#SQL[@693,N67]Result[]
alter table vector_index_08 add column d vecf32(3) not null after c;

#SQL[@694,N29]Result[22, 487, 486, 494, 495, 494]
select * from vector_index_08;
a  ¦  b  ¦  c  ¦  d
9774  ¦  [1, 0, 1, 6, 6, 17, 47, 39, 2, 0, 1, 25, 27, 10, 56, 130, 18, 5, 2, 6, 15, 2, 19, 130, 42, 28, 1, 1, 2, 1, 0, 5, 0, 2, 4, 4, 31, 34, 44, 35, 9, 3, 8, 11, 33, 12, 61, 130, 130, 17, 0, 1, 6, 2, 9, 130, 111, 36, 0, 0, 11, 9, 1, 12, 2, 100, 130, 28, 7, 2, 6, 7, 9, 27, 130, 83, 5, 0, 1, 18, 130, 130, 84, 9, 0, 0, 2, 24, 111, 24, 0, 1, 37, 24, 2, 10, 12, 62, 33, 3, 0, 0, 0, 1, 3, 16, 106, 28, 0, 0, 0, 0, 17, 46, 85, 10, 0, 0, 1, 4, 11, 4, 2, 2, 9, 14, 8, 8]  ¦  3  ¦  [0, 0, 0]
9775  ¦  [0, 1, 1, 3, 0, 3, 46, 20, 1, 4, 17, 9, 1, 17, 108, 15, 0, 3, 37, 17, 6, 15, 116, 16, 6, 1, 4, 7, 7, 7, 9, 6, 0, 8, 10, 4, 26, 129, 27, 9, 0, 0, 5, 2, 11, 129, 129, 12, 103, 4, 0, 0, 2, 31, 129, 129, 94, 4, 0, 0, 0, 3, 13, 42, 0, 15, 38, 2, 70, 129, 1, 0, 5, 10, 40, 12, 74, 129, 6, 1, 129, 39, 6, 1, 2, 22, 9, 33, 122, 13, 0, 0, 0, 0, 5, 23, 4, 11, 9, 12, 45, 38, 1, 0, 0, 4, 36, 38, 57, 32, 0, 0, 82, 22, 9, 5, 13, 11, 3, 94, 35, 3, 0, 0, 0, 1, 16, 97]  ¦  5  ¦  [0, 0, 0]
9776  ¦  [10, 3, 8, 5, 48, 26, 5, 16, 17, 0, 0, 2, 132, 53, 1, 16, 112, 6, 0, 0, 7, 2, 1, 48, 48, 15, 18, 31, 3, 0, 0, 9, 6, 10, 19, 27, 50, 46, 17, 9, 18, 1, 4, 48, 132, 23, 3, 5, 132, 9, 4, 3, 11, 0, 2, 46, 84, 12, 10, 10, 1, 0, 12, 76, 26, 22, 16, 26, 35, 15, 3, 16, 15, 1, 51, 132, 125, 8, 1, 2, 132, 51, 67, 91, 8, 0, 0, 30, 126, 39, 32, 38, 4, 0, 1, 12, 24, 2, 2, 2, 4, 7, 2, 19, 93, 19, 70, 92, 2, 3, 1, 21, 36, 58, 132, 94, 0, 0, 0, 0, 21, 25, 57, 48, 1, 0, 0, 1]  ¦  3  ¦  [0, 0, 0]
9777  ¦  [16, 15, 0, 0, 5, 46, 5, 5, 4, 0, 0, 0, 28, 118, 12, 5, 75, 44, 5, 0, 6, 32, 6, 49, 41, 74, 9, 1, 0, 0, 0, 9, 1, 9, 16, 41, 71, 80, 3, 0, 0, 4, 3, 5, 51, 106, 11, 3, 112, 28, 13, 1, 4, 8, 3, 104, 118, 14, 1, 1, 0, 0, 0, 88, 3, 27, 46, 118, 108, 49, 2, 0, 1, 46, 118, 118, 27, 12, 0, 0, 33, 118, 118, 8, 0, 0, 0, 4, 118, 95, 40, 0, 0, 0, 1, 11, 27, 38, 12, 12, 18, 29, 3, 2, 13, 30, 94, 78, 30, 19, 9, 3, 31, 45, 70, 42, 15, 1, 3, 12, 14, 22, 16, 2, 3, 17, 24, 13]  ¦  4  ¦  [0, 0, 0]
9778  ¦  [41, 0, 0, 7, 1, 1, 20, 67, 9, 0, 0, 0, 0, 31, 120, 61, 25, 0, 0, 0, 0, 10, 120, 90, 32, 0, 0, 1, 13, 11, 22, 50, 4, 0, 2, 93, 40, 15, 37, 18, 12, 2, 2, 19, 8, 44, 120, 25, 120, 5, 0, 0, 0, 2, 48, 97, 102, 14, 3, 3, 11, 9, 34, 41, 0, 0, 4, 120, 56, 3, 4, 5, 6, 15, 37, 116, 28, 0, 0, 3, 120, 120, 24, 6, 2, 0, 1, 28, 53, 90, 51, 11, 11, 2, 12, 14, 8, 6, 4, 30, 9, 1, 4, 22, 25, 79, 120, 66, 5, 0, 0, 6, 42, 120, 91, 43, 15, 2, 4, 39, 12, 9, 9, 12, 15, 5, 24, 36]  ¦  4  ¦  [0, 0, 0]

#SQL[@697,N30]Result[]
SET experimental_ivf_index = 0;

#SQL[@698,N20]Result[]
drop database vecdb2;

